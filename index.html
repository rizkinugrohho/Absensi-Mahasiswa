<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <!-- my css -->
    <link rel="stylesheet" href="style.css">

    <!-- boostrap icon -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css">

    <title>Absen Mahasiswa</title>
  </head>
  <body>
    <!-- navbar -->
    <nav class="navbar shadow fixed-top">
      <div class="container">
        <a class="navbar-brand" href="#"><h3>ABSENSI</h3></a>
        <div class="ms-auto">
          <div class="form-check form-check-inline">
            <input onclick="darkmode(false)" class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2" checked>
            <label class="form-check-label" for="inlineRadio2">light</label>
          </div>
          <div class="form-check form-check-inline">
            <input onclick="darkmode(true)" class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1">
            <label class="form-check-label" for="inlineRadio1">dark</label>
          </div>
        </div>
      </div>
    </nav>
    <!-- akhir navbar -->

    <!-- form absensi -->
    <section id="form">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-6">
            <div class="alert alert-success alert-dismissible fade show d-none my-alert" role="alert">
              <strong>Absensi</strong> anda telah dikirim.
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <form class="form-absensi p-4 rounded-3 shadow-lg" name="absensi-mahasiswa">
              <div class="mb-3">
                <label for="nama" class="form-label">Nama Lengkap</label>
                <input type="text" class="form-control" id="nama" aria-describedby="nama" placeholder="Nama Lengkap" name="nama" required="required">
              </div>
              <div class="mb-3">
                <label for="name" class="form-label">NPM</label>
                <input type="text" class="form-control" id="NPM" aria-describedby="NPM" placeholder="2022804xxx" name="NPM" required="required">
              </div>
              <div class="mb-3">
                <label for="Keterangan" class="form-label">Keterangan</label>
                <select class="form-select" aria-label="keterangan"  name="keterangan">
                  <option value="Hadir">Hadir</option>
                  <option value="Sakit">Sakit</option>
                  <option value="Izin">Izin</option>
                </select>
              </div>
              <!-- <div class="d-flex col justify-content-around">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="hadir" id="exampleRadios1" value="√">
                  <label class="form-check-label" for="exampleRadios1">Hadir</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="sakit" id="exampleRadios2" value="√">
                  <label class="form-check-label" for="exampleRadios2">Sakit</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="izin" id="exampleRadios3" value="√">
                  <label class="form-check-label" for="exampleRadios3">Izin</label>
                </div>
              </div> -->
              <button type="submit" class="btn btn-kirim">Kirim</button>

              <button class="btn btn-loading d-none" type="button" disabled>
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                Loading...
              </button>
            </form>
          </div>
        </div>
      </div>
    </section>
    <!-- akhir form absensi -->

    <!-- footer -->
    <div class="footerL fixed-bottom">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#39ace7" fill-opacity="1" d="M0,160L60,160C120,160,240,160,360,165.3C480,171,600,181,720,197.3C840,213,960,235,1080,234.7C1200,235,1320,213,1380,202.7L1440,192L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"></path></svg>
    </div>

    <div class="footerD fixed-bottom d-none">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#0784b5" fill-opacity="1" d="M0,160L60,160C120,160,240,160,360,165.3C480,171,600,181,720,197.3C840,213,960,235,1080,234.7C1200,235,1320,213,1380,202.7L1440,192L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"></path></svg>
    </div>

    <div class="fixed-bottom text-center">
      <h4>Design by Rizki Nugroho ©2022 | <a href="#"><i class="bi bi-github"></a></i></h4>
    </div>
    <!-- akhir footer -->

    <!-- my js -->
    <script src="script.js"></script>

    <!-- boostrap js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>

    <!-- spreadsheets js -->
    <script>
      const scriptURL = 'https://script.google.com/macros/s/AKfycbxIsgYzxJMuAxBkS9-xNGmm69fhXfOF2KhBQnabYxmzh85fmp_sF6sipAl8jgPo2nTA/exec';

      const form = document.forms['absensi-mahasiswa'];
      const btnKirim = document.querySelector(".btn-kirim");
      const btnLoading = document.querySelector(".btn-loading");
      const alert = document.querySelector(".my-alert");

      form.addEventListener('submit', e => {
        e.preventDefault()
        // ketika tombol submit di klik
        // tampilkan tombol loading, hilangkan tombol kirim
        btnLoading.classList.toggle('d-none');
        btnKirim.classList.toggle('d-none');
        fetch(scriptURL, { method: 'POST', body: new FormData(form)})
          .then(response => {
            btnLoading.classList.toggle('d-none');
            btnKirim.classList.toggle('d-none');
            // tampilkan alert
            alert.classList.toggle('d-none');
            // reset form nya
            form.reset();
            console.log('Success!', response)
          })
          .catch(error => console.error('Error!', error.message))
      })
    </script>
  </body>
</html>